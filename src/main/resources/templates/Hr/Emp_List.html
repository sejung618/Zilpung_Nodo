<html layout:decorate="~{layout}">

<head>
	<!-- jQuery -->
	<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
	<!-- Popper.js (modified for Bootstrap 5) -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
		crossorigin="anonymous"></script>
	<!-- Bootstrap JS -->
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
		crossorigin="anonymous"></script>


</head>

<body>
	<div layout:fragment="content" class="container my-3">
		<h1>사원 정보</h1>

		<!--테이블 시작-->
		<table class="table">

			<thead class="table-primary">
				<tr class="text-center">
					<th>사번</th>
					<th>이름</th>
					<th>입사일</th>
					<th>부서</th>
					<th>직책</th>
					<th>직위</th>
				</tr>
			</thead>

			<tbody>
				<tr class="text-center table-active" th:each="Emplist : ${EmpList}">

					<td>
						<a th:href="@{|/Hr/detail/${Emplist.Id}|}" th:text="${Emplist.EmpNum}"></a>
					</td>
					<td>
						<a href="#" th:onclick="'showemp(\'' + ${Emplist.id} + '\')'" th:text="${Emplist.EmpName}"></a>
					</td>

					<td th:text="${Emplist.EmpDate}"></td>
					<td th:text="${Emplist.DepCode}"></td>
					<td th:text="${Emplist.EmpPosition}"></td>
					<td th:text="${Emplist.EmpSpot}"></td>

				</tr>
			</tbody>

			<tbody>
				<tr class="text-center table-active" th:each="Emplist : ${empDtail}">
					<!--모달 Test
				<td>
					<a th:onclick="'openModal(' + *{Emplist.id} + ')'"></a>
				</td>  [[${Emplist.id}]]
				test end-->
					<td>
						<a th:href="@{|/Hr/detail/${Emplist.Id}|}" th:text="${Emplist.EmpNum}"></a>
					</td>

					<td th:text="${Emplist.EmpName}"></td>
					<td th:text="${Emplist.EmpDate}"></td>
					<td th:text="${Emplist.DepCode}"></td>
					<td th:text="${Emplist.EmpPosition}"></td>
					<td th:text="${Emplist.EmpSpot}"></td>

				</tr>
			</tbody>
		</table>
		<!--테이블 끝-->


		<div class="col-6">
			<a th:href="@{/Hr/create}" class="btn btn-primary">사원 추가</a>
		</div>


		<!--모달창-->
<div class="modal" id="myModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <!-- 각 항목을 한 줄씩 출력 -->
                <div th:each="Emplist : ${empDtail}">
                    <p th:text="'Date: ' + ${Emplist.EmpDate}"></p>
                    <p th:text="'Department Code: ' + ${Emplist.DepCode}"></p>
                    <p th:text="'Employee Position: ' + ${Emplist.EmpPosition}"></p>
                    <p th:text="'Employee Spot: ' + ${Emplist.EmpSpot}"></p>
                </div>
            </div>
        </div>
    </div>
</div>

		<!--
	검색 자바스크립트
	<script layout:fragment="script" type='text/javascript'>
		const page_elements = document.getElementsByClassName("page-link");
		Array.from(page_elements).forEach(function (element) {
			element.addEventListener('click', function () {
				document.getElementById('page').value = this.dataset.page;
				document.getElementById('searchForm').submit();
			});
		});
		const btn_search = document.getElementById("btn_search");
		btn_search.addEventListener('click', function () {
			document.getElementById('kw').value = document.getElementById('search_kw').value;
			document.getElementById('page').value = 0;  // 검색버튼을 클릭할 경우 0페이지부터 조회한다.
			document.getElementById('searchForm').submit();
		});
	</script>
	-->

		<!--모달 스크립트-->
		<script th:inline="javascript">
			function showemp123(id) {
				$('#empDtail').modal('show');
				$('#empId').val(/*[[${id}]]*/ id);

			}
		</script>


		<script>
			function showemp(employeeId) {
				// 모달 열기 코드
				$('#myModal').modal('show');

				// 여기에 직원의 정보를 불러와서 모달에 표시하는 코드 추가
				$.ajax({
					type: 'GET',
					url: '/Hr/detail/' + employeeId,
					success: function (data) {
						// 성공적으로 데이터를 불러왔을 때 모달 내용을 업데이트
						$('#myModal .modal-body').html(data);
					},
					error: function () {
						// 데이터를 불러오는데 실패했을 때의 처리
						console.error('Failed to load employee details.');
					}
				});
			}
		</script>
	</div>

</body>

</html>